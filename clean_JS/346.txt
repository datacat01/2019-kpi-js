
		document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
	

	window.lazySizesConfig = window.lazySizesConfig || {};
	window.lazySizesConfig.rias = window.lazySizesConfig.rias || {};

	// configure available widths to replace with the {width} placeholder
	window.lazySizesConfig.rias.widths = [150, 300, 600, 900, 1200, 1500, 1800, 2100];
	

//<![CDATA[
jQuery(function() {
  jQuery('nav a').each(function() {
    if (jQuery(this).attr('href')  ===  window.location.pathname) {
      jQuery(this).addClass('current');
    }
  });
});  
//]]>


(function ($) {
	document.addEventListener('DOMContentLoaded', load_popup);
	document.addEventListener('shopify:section:load', load_popup);
    $(window).on('resize', function() {
        var popup = document.querySelector('#popup');
        if (!popup) {
            return;
        }
        var isFullscreen = $.fancybox.isOpen;
        if ($(window).width() < 1200) {
            if (isFullscreen) {
                // switch from fullscreen to slide-up
                $.fancybox.close();
                showSlideUpPopup();
            }
        } else {
            if (popup.classList.contains('visible') && popup.dataset.desktopStyle === 'fullscreen') {
                popup.classList.remove('visible');
                showFullScreenPopup();
            }
            if (isFullscreen) {
                $.fancybox.reposition();
            }
        }
    });

	function load_popup() {
		var width = $(window).width();
		if (width === 0) {
			// Iframe (in theme editor) is not yet loaded, wait for it to get some width
			setTimeout(load_popup, 100);
			return;
		}
		if (window.location.pathname === '/challenge') {
			// Don't show popup when we're filling CAPTCHA for contact form
			return;
		}

		var show_popup = false;
		var popup = document.querySelector('#popup');
		if (!popup) {
			// Popup disabled
			return;
		}
		var pop_up_time = parseInt(popup.dataset.popUpTime, 10);
		var pop_up_style = popup.dataset.desktopStyle;
		var pop_up_delay = parseInt(popup.dataset.popupDelay, 10);
		var has_popup_cookie = $.cookie('popup-cookie') === 'true';

		if (popup.dataset.enabled !== 'true') {
			show_popup = false;
		} else if ("true" == "true") {
			// popup is shown every time
			show_popup = true;
		} else if (!has_popup_cookie) {
			// popup cookie is not set, show popup this time
			show_popup = true;
			$.cookie('popup-cookie', 'true', {expires: pop_up_time});
		}
		$('.popup--close-btn').on('click', function () {
			document.querySelector('#popup').classList.remove('visible');
		});
		if (show_popup) {
			showPopup(pop_up_style, pop_up_delay);
		}
	}

	function showPopup(pop_up_style, pop_up_delay) {
        if ($(window).width() < 1200){
            setTimeout(showSlideUpPopup, 1000 * pop_up_delay);
        } else {
            if (pop_up_style === "fullscreen"){
                setTimeout(showFullScreenPopup, 1000 * pop_up_delay);
            } else {
                setTimeout(showSlideUpPopup, 1000 * pop_up_delay);
            }
        }
    }

    function showSlideUpPopup(){
        var popup = document.querySelector('#popup');
        if (popup) {
            popup.querySelector('#slide-up').removeAttribute("style");
            popup.classList.add('slide-up');
            popup.classList.add('visible');
        }
    }

    function showFullScreenPopup(){
        var popup = document.querySelector('#popup');
        if (popup) {
            popup.classList.add('fullscreen');
            popup.querySelector('#fullscreen').removeAttribute("style");

            $.fancybox({
                'autoScale': true,
                'transitionIn': 'elastic',
                'transitionOut': 'elastic',
                'speedIn': 500,
                'speedOut': 300,
                'autoDimensions': true,
                'centerOnScroll': true,
                'href': '#popup #fullscreen',
                tpl: {
                    closeBtn: '<div class="popup--close fancybox-close"></div>'
                }
            });
        }
    }
})(window.wetheme.$);

