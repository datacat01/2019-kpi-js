if(/Mobi/.test(navigator.userAgent)){window.addEventListener("orientationchange",function(){var w=Math.max(document.documentElement.clientWidth,window.innerWidth);var h=Math.max(document.documentElement.clientHeight,window.innerHeight);var change=w>h?"Landscape":"Portrait";ga('send','event','Device Orientation','Orientation Change to '+change,location.pathname);});}
Mage.Cookies.path='/';Mage.Cookies.domain='.petdoors.com';
optionalZipCountries=[];
var Translator=new Translate([]);
(function(a,e,c,f,g,b,d){var h={ak:"1072738648",cl:"iXD9CO_uv1cQ2OLC_wM"};a[c]=a[c]||function(){(a[c].q=a[c].q||[]).push(arguments)};a[f]||(a[f]=h.ak);b=e.createElement(g);b.async=1;b.src="//www.gstatic.com/wcm/loader.js";d=e.getElementsByTagName(g)[0];d.parentNode.insertBefore(b,d);a._googWcmGet=function(b,d,e){a[c](2,b,h,d,null,new Date,e)}})(window,document,"_googWcmImpl","_googWcmAk","script");
dataLayer=[{"visitorLoginState":"Logged out","customerType":"1","visitorType":"NOT LOGGED IN","visitorLifetimeValue":0,"visitorExistingCustomer":"No","ecomm_pagetype":"home"}];
/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-K592CZ');/*]]>*/
var _kiq=_kiq||[];
function agreeCookiePolicy(){Mage.Cookies.set('privacy-cookies-policy','1');document.getElementById('enhanced-privacy-popup').style.display='none';}
if(!Mage.Cookies.get('privacy-cookies-policy')){document.getElementById('enhanced-privacy-popup').style.display='';}
(function(){if('serviceWorker'in navigator){navigator.serviceWorker.register('https://www.petdoors.com/serviceworker-web.js').catch(function(err){console.log('Service worker registration failed:',err);});}})();
var searchForm=new Varien.searchForm('search_mini_form','search','Search by Keyword(s)');searchForm.initAutocomplete('https://www.petdoors.com/catalogsearch/ajax/suggest/','search_autocomplete');
jQuery(document).ready(function(){jQuery('#search_mini_form #search-button').click(function(e){e.preventDefault();var search_val=jQuery('#search_mini_form #search').val();if(jQuery.trim(search_val)==''){jQuery('#search_mini_form #search').val('Search - Type what you are looking for here');}
jQuery('#search_mini_form').submit();});});
jQuery(document).ready(function(){jQuery(window).scroll(function(){if(jQuery(this).scrollTop()>100){jQuery('.scrollToTop').fadeIn();}else{jQuery('.scrollToTop').fadeOut();}});jQuery('.scrollToTop').click(function(){jQuery('html, body').animate({scrollTop:0},800);return false;});});
jQuery(document).ready(function(){jQuery('#search_mini_form_home #search-button-home').click(function(e){var search_val=jQuery('#search_mini_form_home #search-home').val();e.preventDefault();if(jQuery.trim(search_val)==''){jQuery('#search_mini_form_home #search-home').val('Dog door, cat door ..');}
if(jQuery.trim(search_val)=='Dog door, cat door ..'){e.preventDefault();window.location.href="https://www.petdoors.com/pet-doors.html?price_filter=1194";}else{jQuery('#search_mini_form_home').submit();}});});
var newsletterSubscriberFormDetail=new VarienForm('newsletter-validate-detail');var email_value=jQuery('#newsletter').val();Validation.add('required-entry-email','Please enter your email address.',function(email_value){if(email_value=='')
{return false;}
return true;});Validation.add('required-entry-terms','Please check box to agree to Terms and Conditions.',function(){if(jQuery('#terms').is(':checked')==false)
{return false;}
return true;});
/*<![CDATA[*/var formsToProtectOnPage=[];var currentForm;var currentValidationForm;var checkedForms=[];var hasFormsChanged=false;var onSubmit=function(token){if(currentValidationForm&&currentValidationForm.validator&&currentValidationForm.validator.validate()){currentForm.querySelector('[name="amasty_invisible_token"]').setAttribute('value',token);if(typeof(recaptchaObject)!=='undefined'){recaptchaObject.submit();}else{currentForm.submit();}}else{grecaptcha.reset();}};function checkForms(){formsToProtect=["form[action*=\"review\/product\/post\/id\"]","form[action*=\"contacts\/index\/post\"]","form[action*=\"newsletter\/subscriber\/new\"]"];formsToProtect.forEach(function(item){var continueWorking=true;formsSearchedBySelector=$$(item);checkedForms.forEach(function(element){if(element[0]==formsSearchedBySelector[0]){continueWorking=false;return;}})
if(formsSearchedBySelector.length!=0&&continueWorking){checkedForms.push(formsSearchedBySelector);formsSearchedBySelector.forEach(function(formToProtect){formsToProtectOnPage.push(formToProtect);hasFormsChanged=true;});}});if(hasFormsChanged){for(var index in formsToProtectOnPage){if(formsToProtectOnPage.hasOwnProperty(index)){var formToProtectOnPage=formsToProtectOnPage[index];if('form'!==formToProtectOnPage.tagName.toLowerCase()){formToProtectOnPage=formToProtectOnPage.getElementsByTagName('form');if(0<formToProtectOnPage.length){formToProtectOnPage=formToProtectOnPage[0];}else{continue;}}
var recaptchaBlock=document.createElement('div');recaptchaBlock.className='amasty_recaptcha';formToProtectOnPage.appendChild(recaptchaBlock);var tokenInput=document.createElement('input');tokenInput.type='hidden';tokenInput.name='amasty_invisible_token';tokenInput.value='';formToProtectOnPage.appendChild(tokenInput);formToProtectOnPage.onsubmit=function submitProtectedForm(event){currentForm=event.target;currentValidationForm=new VarienForm(currentForm.id,false);recaptchaBlock=currentForm.querySelector(".amasty_recaptcha");if(''==recaptchaBlock.innerHTML){recaptcha=grecaptcha.render(recaptchaBlock,{'sitekey':'6LfXxFAUAAAAAPnwp1-fYBJV3AVuK8lg_H2n_Xhc','callback':onSubmit,'size':'invisible','theme':'light','badge':'bottomright'});}
grecaptcha.reset(recaptcha);grecaptcha.execute(recaptcha);return false;}}}}}
document.observe("dom:loaded",function(){var formsCount=0;setInterval(function(){var formLength=$$('form').length;if(formsCount!=formLength){formsCount=formLength;checkForms();}},1000);});/*]]>*/
Listrak_Remarketing=new function(){this.updateCart=function(){new Ajax.Request('https://www.petdoors.com/remarketing/ajax/cart/');};this.track=function(){new Ajax.Request('https://www.petdoors.com/remarketing/ajax/track/');};};
/*<![CDATA[*/(function(d){if(document.addEventListener)document.addEventListener('ltkAsyncListener',d);else{e=document.documentElement;e.ltkAsyncProperty=0;e.attachEvent('onpropertychange',function(e){if(e.propertyName=='ltkAsyncProperty'&&typeof _ltk!=='undefined'){d();}});}})(function(){_ltk.SCA.CaptureEmail('login-email');});/*]]>*/
/*<![CDATA[*/(function(d,s,id,url){var js,ljs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src=url;js.type="text/javascript";ljs.parentNode.insertBefore(js,ljs);})(document,'script','ltkSDK','https://cdn.listrakbi.com/scripts/script.js?m=NVkH7m9t9NWY&v=1');/*]]>*/
/*<![CDATA[*/var newwindow;var intId;function fbLogin(){var screenX=typeof window.screenX!='undefined'?window.screenX:window.screenLeft;var screenY=typeof window.screenY!='undefined'?window.screenY:window.screenTop;var outerWidth=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth;var outerHeight=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22);var width=500;var height=270;var left=parseInt(screenX+((outerWidth-width)/2),10);var top=parseInt(screenY+((outerHeight-height)/2.5),10);var features=('width='+width+',height='+height+',left='+left+',top='+top);newwindow=window.open('https://www.facebook.com/dialog/oauth?client_id=537220539747679&redirect_uri=https%3A%2F%2Fwww.petdoors.com%2Fsociallogin%2Ffblogin%2Flogin%2Fauth%2F1%2F&state=a225a66e9b0dc76308f8e90d61ca9e3c&display=popup&scope=email','Login_by_facebook',features);if(window.focus){newwindow.focus()}
return false;}/*]]>*/
if($('bt-loginfb-popup'))
$('bt-loginfb-popup').addClassName('visible');
var newwindow;var intId;function goLogin(){var screenX=typeof window.screenX!='undefined'?window.screenX:window.screenLeft;var screenY=typeof window.screenY!='undefined'?window.screenY:window.screenTop;var outerWidth=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth;var outerHeight=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22);var widthgg=700;var heightgg=400;var leftgg=parseInt(screenX+((outerWidth-widthgg)/2),10);var topgg=parseInt(screenY+((outerHeight-heightgg)/2.5),10);var features=('width='+widthgg+',height='+heightgg+',left='+leftgg+',top='+topgg);newwindow=window.open('https://www.petdoors.com/sociallogin/gologin/login/','Login_by_google',features);if(window.focus){newwindow.focus()}
return false;}
if($('bt-logingo-popup'))
$('bt-logingo-popup').addClassName('visible');
/*<![CDATA[*/try{var links=document.links;for(i=0;i<links.length;i++){if(links[i].href.search('/customer/account/login/')!=-1&&links[i].href.search('/customer/account/login/#')==-1){links[i].href='javascript:socialLogin.open();$("magestore-create-back").click();';Event.observe(links[i],'click',function(){$('magestore-login-social').style.display="block";if($('sociallogin-other-a-popup'))$('sociallogin-other-a-popup').style.display="block";$('magestore-popup').style.width="706px";});}
if(links[i].href.search('/customer/account/create/')!=-1&&links[i].href.search('/customer/account/create/#')==-1){links[i].href='javascript:socialLogin.open();$("magestore-sociallogin-create-new-customer").click();';Event.observe(links[i],'click',function(){$('magestore-login-social').style.display="block";if($('sociallogin-other-a-popup'))$('sociallogin-other-a-popup').style.display="block";$('magestore-popup').style.width="706px";});}
if(links[i].href.search('/wishlist/')!=-1){links[i].href='javascript:socialLogin.open();';Event.observe(links[i],'click',function(){$('magestore-login-social').style.display="block";if($('sociallogin-other-a-popup'))$('sociallogin-other-a-popup').style.display="block";$('magestore-popup').style.width="706px";});}
if(links[i].href.search('/customer/account/')!=-1&&!links[i].down('span')&&links[i].href.search('/customer/account/login/#')==-1){links[i].href='javascript:socialLogin.open();';Event.observe(links[i],'click',function(){$('magestore-login-social').style.display="block";if($('sociallogin-other-a-popup'))$('sociallogin-other-a-popup').style.display="block";$('magestore-popup').style.width="706px";});}}
if(document.getElementById('product_comparison')){var links=document.links;for(i=0;i<links.length;i++){if(links[i].href.search('/wishlist/')!=-1){links[i].href='javascript:socialLogin.open();';}}}
if(document.getElementById("checkout-step-login")){$$('.col-2 .buttons-set').each(function(e){e.insert({bottom:'<div id="multilogin"> <button type="button" class="button" style="" onclick="javascript:socialLogin.open();" title="Social Login" name="headerboxLink1" id="headerboxLink1"><span><span>Social Login</span></span></button></div>'});});}}catch(exception){alert(exception);}/*]]>*/
socialLogin=new Lightboxsocial('magestore-popup');Event.observe(window,'load',function(){Event.observe('bg_fade','click',function(){socialLogin.close();});});Event.observe('sociallogin-close-popup','click',function(){socialLogin.close();});document.observe("dom:loaded",function(){var magestorePopupSocial=$('magestore-popup_social');Event.observe(window,'resize',function(){socialLogin._centerWindow('magestore-popup');socialLogin._centerWindow('magestore-popup_social');});});
/*<![CDATA[*/function checkHttps(requestUrl){if(window.location.href.match('https://')&&!requestUrl.match('https://'))
requestUrl=requestUrl.replace('http://','https://');if(!window.location.href.match('https://')&&requestUrl.match('https://'))
requestUrl=requestUrl.replace('https://','http://');return requestUrl;}
Event.observe(window,'load',function(){var options={email:document.getElementById('magestore-sociallogin-popup-email').value,pass:document.getElementById('magestore-sociallogin-popup-pass').value,login_url:checkHttps("https://www.petdoors.com/sociallogin/popup/login"),send_pass_url:checkHttps("https://www.petdoors.com/sociallogin/popup/sendPass"),create_url:checkHttps("https://www.petdoors.com/sociallogin/popup/createAcc"),};Login=new LoginPopup(options);});/*]]>*/
/*<![CDATA[*/var newwindow;var intId;function fbLogin(){var screenX=typeof window.screenX!='undefined'?window.screenX:window.screenLeft;var screenY=typeof window.screenY!='undefined'?window.screenY:window.screenTop;var outerWidth=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth;var outerHeight=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22);var width=500;var height=270;var left=parseInt(screenX+((outerWidth-width)/2),10);var top=parseInt(screenY+((outerHeight-height)/2.5),10);var features=('width='+width+',height='+height+',left='+left+',top='+top);newwindow=window.open('https://www.facebook.com/dialog/oauth?client_id=537220539747679&redirect_uri=https%3A%2F%2Fwww.petdoors.com%2Fsociallogin%2Ffblogin%2Flogin%2Fauth%2F1%2F&state=c67567358bc08a1d3766f2789c95ee33&display=popup&scope=email','Login_by_facebook',features);if(window.focus){newwindow.focus()}
return false;}/*]]>*/
$('bt-loginfb').addClassName('non-visible');
var newwindow;var intId;function goLogin(){var screenX=typeof window.screenX!='undefined'?window.screenX:window.screenLeft;var screenY=typeof window.screenY!='undefined'?window.screenY:window.screenTop;var outerWidth=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth;var outerHeight=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22);var widthgg=700;var heightgg=400;var leftgg=parseInt(screenX+((outerWidth-widthgg)/2),10);var topgg=parseInt(screenY+((outerHeight-heightgg)/2.5),10);var features=('width='+widthgg+',height='+heightgg+',left='+leftgg+',top='+topgg);newwindow=window.open('https://www.petdoors.com/sociallogin/gologin/login/','Login_by_google',features);if(window.focus){newwindow.focus()}
return false;}
$('bt-logingo').addClassName('non-visible');
