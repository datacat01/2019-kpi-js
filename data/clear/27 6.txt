(window.webpackJsonp=window.webpackJsonp||[]).push([["Explore~Frontpage~ModListing~ModQueuePages~Multireddit~News~OriginalContent~ProfileComments~ProfileO~bb6a7f26"],{"./src/lib/intersectionObserver/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s});var i=void 0,r=new Map,o=new Map;"undefined"!=typeof window&&(n("./node_modules/intersection-observer/intersection-observer.js"),i=new IntersectionObserver(function(e){e.forEach(function(e){var t=e.target,n=e.intersectionRatio>0;if(n!==!!o.get(t)){o.set(t,n);var i=r.get(t);if(i)i(e,n&&!!o.get(t))}})},{threshold:[.001]}));var l=function(e,t){try{r.set(e,t),i&&i.observe(e)}catch(e){0}},s=function(e){try{r.delete(e),i&&i.unobserve(e)}catch(e){0}}},"./src/reddit/components/PostLeftRail/index.m.less":function(e,t,n){e.exports={postLeftRail:"_23h0-EcaBUorIHC-JZyh6J"}},"./src/reddit/components/PostLeftRail/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"c",function(){return p});var i=n("./node_modules/babel-runtime/helpers/jsx.js"),r=n.n(i),o=(n("./node_modules/react/index.js"),n("./bundled-modules/styled-components/styled-components.min.js")),l=n("./src/lib/classNames/index.ts"),s=n("./src/reddit/constants/colors.ts"),a=n("./src/reddit/models/Theme/NewColorSystem/index.ts"),d=n("./src/reddit/components/PostLeftRail/index.m.less"),c=n.n(d),h=40,p=function(e){return e.isSponsored?Object(a.c)(e).button:e.isRemoved?s.a.removed:e.isReported?s.a.reported:"transparent"},u=Object(o.withTheme)(function(e){var t=p(e),n={width:h+"px",borderLeft:"4px solid "+t};return r()("div",{className:Object(l.a)(c.a.postLeftRail,e.className),style:n},void 0,e.children)});t.b=u},"./src/reddit/components/PostList/Placeholder.tsx":function(e,t,n){"use strict";var i,r=n("./node_modules/babel-runtime/helpers/jsx.js"),o=n.n(r),l=n("./node_modules/babel-runtime/helpers/slicedToArray.js"),s=n.n(l),a=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),d=n.n(a),c=n("./node_modules/babel-runtime/helpers/createClass.js"),h=n.n(c),p=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=n.n(p),m=n("./node_modules/babel-runtime/helpers/inherits.js"),f=n.n(m),g=n("./node_modules/lodash/constant.js"),v=n.n(g),b=n("./node_modules/lodash/times.js"),C=n.n(b),x=n("./node_modules/react/index.js"),w=n.n(x),I=n("./node_modules/react-redux/es/index.js"),y=n("./node_modules/reselect/es/index.js"),k=n("./src/lib/fastdom/index.ts"),R=n("./src/lib/intersectionObserver/index.ts"),S=n("./node_modules/babel-runtime/helpers/defineProperty.js"),O=n.n(S),T=n("./src/reddit/constants/postLayout.ts"),M=n("./node_modules/babel-runtime/helpers/extends.js"),j=n.n(M),P=n("./bundled-modules/styled-components/styled-components.min.js"),E=n.n(P),F=n("./src/reddit/components/PostLeftRail/index.tsx"),V=n("./src/reddit/components/VerticalVotes/votes.tsx"),H=n("./src/reddit/contexts/PageLayer/index.tsx"),W=n("./src/reddit/constants/posts.ts"),N=n("./src/reddit/helpers/styles/components/index.tsx"),L=n("./src/reddit/helpers/styles/mixins/index.tsx"),_=n("./src/reddit/helpers/styles/mixins/loading.ts"),z=n("./src/reddit/models/Theme/NewColorSystem/index.ts"),A=n("./src/reddit/models/Vote/index.ts"),K=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(n[i[r]]=e[i[r]])}return n},U=Object(H.w)(),q=Object(y.createStructuredSelector)({isFakeSubreddit:H.B}),B=Object(I.connect)(q),D=E.a.div.withConfig({componentId:"s11ntmk-0"})(["display: flex;margin: 8px 0;"]),J=E.a.div.withConfig({componentId:"s11ntmk-1"})(["display: flex;flex-direction: column;justify-content: space-between;margin-left: 8px;"]),Q=E()(Object(N.a)()).withConfig({componentId:"s11ntmk-2"})(["","",""],_.b,_.c),Y=E.a.div.withConfig({componentId:"s11ntmk-3"})(["","background: rgba(0, 0, 0, 0.15);height: 16px;margin: 1.5px 0 1.5px -8px;width: 16px;"],_.c),Z=E()(function(e){var t={interactive:!1,voteState:A.a.notVoted};return o()("div",{className:e.className},void 0,w.a.createElement(V.d,j()({key:"u"},t)),o()(Y,{},"s"),w.a.createElement(V.c,j()({key:"d"},t)))}).withConfig({componentId:"s11ntmk-4"})(["",""],L.y),G=E.a.div.withConfig({componentId:"s11ntmk-5"})(["","margin-left: 8px;"],Object(L.x)(W.c,W.d)),X=E()(Q).withConfig({componentId:"s11ntmk-6"})(["","","position: relative;"],L.d,L.c),$=E()(Q).withConfig({componentId:"s11ntmk-7"})(["height: 20px;width: 328px;"]),ee=E()(Q).withConfig({componentId:"s11ntmk-8"})(["height: 10px;margin-top: 8px;width: 88px;"]),te=E.a.div.withConfig({componentId:"s11ntmk-9"})(["align-items: center;display: flex;flex-direction: row;margin: auto 8px 0 0;"]),ne=E()(Q).withConfig({componentId:"s11ntmk-10"})(["height: 12px;width: 16px;"]),ie=E.a.div.withConfig({componentId:"s11ntmk-11"})(["border-right: 1px solid ",";height: 16px;margin: 0 8px;vertical-align: middle;"],function(e){return Object(z.c)(e).line}),re=E()(Q).withConfig({componentId:"s11ntmk-12"})(["height: 12px;width: 110px;"]),oe=E()(Q).withConfig({componentId:"s11ntmk-13"})(["height: 12px;margin-left: 8px;width: 20px;"]),le=E()(U(B(function(e){var t=e.className,n=K(e,["className"]);return o()("div",{className:t},void 0,o()(F.b,{},void 0,w.a.createElement(Z,n)),o()(D,{},void 0,o()(G,{},void 0,w.a.createElement(X,j()({gradientType:"posts"},n))),o()(J,{},void 0,o()("div",{},"a",w.a.createElement($,j()({key:"aa",gradientType:"posts"},n)),w.a.createElement(ee,j()({key:"ab",gradientType:"posts"},n))),o()(te,{},"f",w.a.createElement(ne,j()({key:"fa",gradientType:"posts"},n)),o()(ie,{},"fb"),w.a.createElement(re,j()({key:"fc",gradientType:"posts"},n)),w.a.createElement(oe,j()({key:"fd",gradientType:"posts"},n))))))}))).withConfig({componentId:"s11ntmk-14"})(["","",""],L.h,L.g),se=n("./src/reddit/components/SubredditIcon/index.tsx"),ae=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(n[i[r]]=e[i[r]])}return n},de=Object(H.w)(),ce=Object(y.createStructuredSelector)({isFakeSubreddit:H.B}),he=Object(I.connect)(ce),pe=E.a.div.withConfig({componentId:"s18sguzx-0"})(["","background: rgba(0, 0, 0, 0.15);height: 16px;margin: 0 14px 0 4px;width: 16px;"],_.c),ue=E()(function(e){var t={interactive:!1,voteState:A.a.notVoted};return o()("div",{className:e.className},void 0,w.a.createElement(V.d,j()({key:"u"},t)),o()(pe,{},"s"),w.a.createElement(V.c,j()({key:"d"},t)))}).withConfig({componentId:"s18sguzx-1"})(["","align-items: center;flex-direction: row;"],L.y),me=E.a.div.withConfig({componentId:"s18sguzx-2"})(["align-items: flex-start;display: flex;flex-direction: row;padding: 3px 8px 3px 4px;"]),fe=E.a.div.withConfig({componentId:"s18sguzx-3"})(["margin: 4px;margin-left: 14px;"]),ge=E()(Object(N.a)()).withConfig({componentId:"s18sguzx-4"})(["","border-radius: 100%;height: 16px;width: 16px;"],_.b),ve=E.a.div.withConfig({componentId:"s18sguzx-5"})(["margin: 2px 12px 0 4px;"]),be=E()(function(e){return o()(se.a,{className:e.className})}).withConfig({componentId:"s18sguzx-6"})(["",""],_.b),Ce=E()(Object(N.a)()).withConfig({componentId:"s18sguzx-7"})(["","",""],_.b,_.c),xe=E.a.div.withConfig({componentId:"s18sguzx-8"})(["align-items: center;display: flex;flex: 1 1 100%;min-height: 24px;overflow: hidden;"]),we=E()(Ce).withConfig({componentId:"s18sguzx-9"})(["height: 12px;margin-top: 2px;width: 160px;"]),Ie=E()(Ce).withConfig({componentId:"s18sguzx-10"})(["height: 12px;margin-left: 8px;margin-top: 2px;width: 256px;"]),ye=E()(Ce).withConfig({componentId:"s18sguzx-11"})(["height: 12px;margin-left: 8px;width: 52px;"]),ke=E()(Ce).withConfig({componentId:"s18sguzx-12"})(["height: 12px;margin-left: 8px;width: 20px;"]),Re=E()(function(e){var t=e.className,n=ae(e,["className"]);return o()("div",{className:t},void 0,w.a.createElement(ye,j()({key:"fc",gradientType:"posts"},n)),w.a.createElement(ke,j()({key:"fe",gradientType:"posts"},n)))}).withConfig({componentId:"s18sguzx-13"})(["align-items: center;display: flex;margin-left: auto;min-height: 24px;"]),Se=E()(de(he(function(e){var t=e.className,n=ae(e,["className"]);return o()("div",{className:t},void 0,o()(me,{},void 0,w.a.createElement(ue,j()({key:"c"},n)),o()(fe,{},"a",w.a.createElement(ge,j()({gradientType:"posts"},n))),o()(ve,{},"d",w.a.createElement(be,j()({gradientType:"posts"},n,{isLoading:!1}))),o()(xe,{},"e",w.a.createElement(we,j()({gradientType:"posts",key:"ea"},n)),w.a.createElement(Ie,j()({gradientType:"posts",key:"eb"},n))),w.a.createElement(Re,j()({key:"f"},n))))}))).withConfig({componentId:"s18sguzx-14"})(["","",""],L.i,L.g),Oe=n("./src/reddit/models/Media/index.ts"),Te=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(n[i[r]]=e[i[r]])}return n},Me=Math.round(.67*Oe.i),je=Object(H.w)(),Pe=Object(y.createStructuredSelector)({isFakeSubreddit:H.B}),Ee=Object(I.connect)(Pe),Fe=E.a.div.withConfig({componentId:"s14x7kh8-0"})(["margin: 8px 0 0 40px;"]),Ve=E()(Object(N.a)()).withConfig({componentId:"s14x7kh8-1"})(["","",""],_.b,_.c),He=E.a.div.withConfig({componentId:"s14x7kh8-2"})(["","background: rgba(0, 0, 0, 0.15);height: 16px;margin: 1.5px 0 1.5px -8px;width: 16px;"],_.c),We=E()(function(e){var t={interactive:!1,voteState:A.a.notVoted};return o()("div",{className:e.className},void 0,w.a.createElement(V.d,j()({key:"u"},t)),o()(He,{},"s"),w.a.createElement(V.c,j()({key:"d"},t)))}).withConfig({componentId:"s14x7kh8-3"})(["",""],L.y),Ne=E()(function(e){e.gradientType,e.isLoading;var t=Te(e,["gradientType","isLoading"]);return w.a.createElement(se.b,t)}).withConfig({componentId:"s14x7kh8-4"})(["",""],_.b),Le=E.a.div.withConfig({componentId:"s14x7kh8-5"})(["align-items: center;display: flex;flex-direction: row;flex-wrap: nowrap;margin: 0 8px 8px 0;"]),_e=E()(Ve).withConfig({componentId:"s14x7kh8-6"})(["height: 12px;width: 88px;"]),ze=E()(Ve).withConfig({componentId:"s14x7kh8-7"})(["height: 12px;margin-left: 8px;width: 232px;"]),Ae=E()(Ve).withConfig({componentId:"s14x7kh8-8"})(["height: 20px;margin-top: 16px;width: 328px;"]),Ke=E()(Object(N.a)()).withConfig({componentId:"s14x7kh8-9"})(["","height: ","px;margin: 8px 0 0 40px;width: 100%;"],_.b,Me),Ue=E.a.div.withConfig({componentId:"s14x7kh8-10"})(["align-items: center;display: flex;flex-direction: row;margin: 8px 8px 8px 0;"]),qe=E()(Ve).withConfig({componentId:"s14x7kh8-11"})(["height: 16px;width: 110px;"]),Be=E()(Ve).withConfig({componentId:"s14x7kh8-12"})(["height: 16px;margin-left: 8px;width: 20px;"]),De=E()(je(Ee(function(e){var t=e.className,n=(e.dispatch,e.pageLayer,Te(e,["className","dispatch","pageLayer"]));return o()("div",{className:t},void 0,o()(F.b,{},"a",w.a.createElement(We,n)),o()(Fe,{},"b",o()(Le,{},"ba",n.isFakeSubreddit&&o()(Ne,{gradientType:"posts",isLoading:!1},"baa"),w.a.createElement(_e,j()({key:"bab",gradientType:"posts"},n)),w.a.createElement(ze,j()({key:"bac",gradientType:"posts"},n))),w.a.createElement(Ae,j()({key:"bb",gradientType:"posts"},n))),w.a.createElement(Ke,j()({key:"c",gradientType:"posts"},n)),o()(Fe,{},"d",o()(Ue,{},void 0,w.a.createElement(qe,j()({gradientType:"posts"},n)),w.a.createElement(Be,j()({gradientType:"posts"},n)))))}))).withConfig({componentId:"s14x7kh8-13"})(["",""],L.b),Je=(i={},O()(i,T.f.Large,[De,2]),O()(i,T.f.Classic,[le,10]),O()(i,T.f.Compact,[Se,30]),i);function Qe(e){return Je[e]}var Ye=.1,Ze=Object(y.createStructuredSelector)({loadingPostComponentForLayout:function(){return Qe}}),Ge=Object(I.connect)(Ze),Xe=function(e){function t(){d()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.mounted=!1,e.state={visible:!1},e.setWrapperRef=function(t){t!==e.wrapperRef&&(e.wrapperRef&&R.b(e.wrapperRef),t&&R.a(t,e.updateVisibleState)),e.wrapperRef=t},e.updateVisibleState=function(t){var n=t.intersectionRatio>=Ye;k.a.write(function(){e.mounted&&e.setState(function(e){return e.visible!==n?{visible:n}:null})})},e}return f()(t,e),h()(t,[{key:"componentDidMount",value:function(){document.documentElement.scrollTop=document.body.scrollTop=0,this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.wrapperRef&&R.b(this.wrapperRef)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.countOverride,i=e.isLoading,r=e.layout,l=e.loadingPostComponentForLayout,a=this.state.visible,d=l(r),c=s()(d,2),h=c[0],p=c[1],u=n||p,m=v()(o()(h,{isLoading:i&&a})),f=C()(u,m);return w.a.createElement("div",{className:t,ref:this.setWrapperRef},w.a.Children.toArray(f))}}]),t}(w.a.Component);t.a=Ge(Xe)},"./src/reddit/components/Scroller/Simple.tsx":function(e,t,n){"use strict";var i,r=n("./node_modules/babel-runtime/helpers/jsx.js"),o=n.n(r),l=n("./node_modules/babel-runtime/helpers/classCallCheck.js"),s=n.n(l),a=n("./node_modules/babel-runtime/helpers/createClass.js"),d=n.n(a),c=n("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=n.n(c),p=n("./node_modules/babel-runtime/helpers/inherits.js"),u=n.n(p),m=n("./node_modules/babel-runtime/helpers/typeof.js"),f=n.n(m),g=n("./node_modules/lodash/debounce.js"),v=n.n(g),b=n("./node_modules/lodash/isNil.js"),C=n.n(b),x=n("./node_modules/react/index.js"),w=n.n(x),I=n("./node_modules/react-dom/index.js"),y=n("./node_modules/react-redux/es/index.js"),k=n("./node_modules/request-idle-callback/index.js"),R=n("./node_modules/reselect/es/index.js"),S=n("./bundled-modules/styled-components/styled-components.min.js"),O=n.n(S),T=n("./src/lib/constants/index.ts"),M=n("./src/lib/fastdom/index.ts"),j=n("./node_modules/babel-runtime/helpers/defineProperty.js"),P=n.n(j),E=n("./node_modules/lodash/throttle.js"),F=n.n(E),V=500,H=1e3,W=40;!function(e){e.Max10="0-10",e.Max20="11-20",e.Max30="21-30",e.Max40="31-40",e.Max50="41-50",e.Max60="51-60"}(i||(i={}));var N=function(){var e;return e={},P()(e,i.Max10,0),P()(e,i.Max20,0),P()(e,i.Max30,0),P()(e,i.Max40,0),P()(e,i.Max50,0),P()(e,i.Max60,0),e},L=[i.Max10,i.Max20,i.Max30,i.Max40,i.Max50,i.Max60];function _(e){var t=e.fn,n=e.subscriber,r=e.timeout;var o=[],l=void 0,s=void 0,a=void 0,d=function(){if(!(o.length<W)){var e=N(),t=Math.min(H,o.length),r=o.splice(0,t);o.splice(0,o.length);for(var l=r[t-1]-r[0],s=r.shift();r.length>0;s=r.shift()){var a=r[0]-s,d=Math.min(60,Math.ceil(1e3/a));e[d<=10?i.Max10:60===d?i.Max60:L[Math.ceil(d/10)-1]]+=a}var c=N();for(var h in e)c[h]=e[h]/l;n(c)}},c=function(){void 0!==a&&(window.clearTimeout(a),a=void 0)},h=function(){void 0!==l&&(cancelAnimationFrame(l),l=void 0),void 0!==s&&(window.clearInterval(s),s=void 0),c(),d()},p=F()(function(){c(),a=window.setTimeout(h,r)},T.K);return{cleanup:h,eventHandler:function(e){void 0===s?(function e(){l=requestAnimationFrame(function(){o.push(performance.now()),e()})}(),p(),s=window.setInterval(d,V)):p(),t(e)}}}var z=n("./src/lib/scheduler/index.ts"),A=n("./src/lib/domUtils/index.ts"),K=n("./src/lib/LinkedListMap/index.ts"),U=function(e,t){return e<0?t+e:e%t},q=function(){function e(t){s()(this,e),this.head=0,this.size=0,this.maxSize=t,this.items=new Array(t)}return d()(e,[{key:"push",value:function(e){return this.items[this.head]=e,this.head=U(this.head+1,this.maxSize),this.size<this.maxSize&&this.size++,this}},{key:"pop",value:function(){if(this.size>0){var e=U(this.head-1,this.maxSize),t=this.items[e];return this.items[e]=void 0,this.head=e,this.size--,t}}},{key:"forEach",value:function(e){for(var t=this.size<this.maxSize?U(this.head-this.size,this.maxSize):this.head,n=0;n<this.size;n++)e(this.items[t],n,this.size),t=(t+1)%this.maxSize}},{key:"map",value:function(e){var t=new Array(this.size);return this.forEach(function(n,i,r){t[i]=e(n,i,r)}),t}},{key:"getEntries",value:function(){var e=new Array(this.size);return this.forEach(function(t,n){e[n]=t}),e}},{key:"clear",value:function(){for(var e=this.size,t=0;t<e;t++)this.pop()}}]),e}(),B=function(){return document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0},D=function(){function e(t){var n=t.top,i=t.height,r=t.heightWithMargin;s()(this,e),this.height=i,this.heightWithMargin=r,this.top=n,this.bottom=this.top+this.height}return d()(e,[{key:"contains",value:function(e){return!(e.top<=this.top||e.bottom>=this.bottom)}},{key:"intersects",value:function(e){return!(e.bottom<=this.top||e.top>=this.bottom)}},{key:"intersectsBorder",value:function(e){return e.top<=this.top&&e.bottom>=this.top||e.bottom>=this.bottom&&e.top<=this.bottom}},{key:"containsTop",value:function(e){return!(e.top<this.top||e.top>this.bottom)}},{key:"isAbove",value:function(e){return e.top>this.bottom}},{key:"isBelow",value:function(e){return e.bottom<this.top}}]),e}(),J=n("./src/reddit/constants/componentSizes.ts"),Q=n("./src/reddit/constants/elementClassNames.ts"),Y=n("./src/reddit/contexts/InsideOverlay.tsx"),Z=n("./src/reddit/selectors/platform.ts"),G=n("./src/telemetry/helpers/sendEvent.ts"),X=n("./src/telemetry/helpers/sendTiming.ts"),$=J.k,ee=5*T.K,te=3,ne=Object(R.createStructuredSelector)({isOverlayOpen:Z.h}),ie=Object(y.connect)(ne),re={};function oe(e){var t=0;do{t+=e.offsetTop||0,e=e.offsetParent}while(e);return t}var le=10,se=.9,ae=.9,de=1.8,ce=5,he=1500,pe=2*T.K,ue=400,me=8,fe=5*T.K,ge=30,ve="object"===("undefined"==typeof performance?"undefined":f()(performance))&&"function"==typeof performance.now,be=function(){return ve?performance.now():Date.now()};function Ce(e,t){return K.a.fromArray(e.children.map(function(e,n){var i=t&&t.get(e.id);return i?(i.isFocusable=!!e.isFocusable,i.trackOnEnteredViewport=e.trackOnEnteredViewport,i.trackOnExitedViewport=e.trackOnExitedViewport,i):{el:null,id:e.id,index:n,isFocusable:!!e.isFocusable,itemRef:void 0,focused:!1,loaded:!t&&n<ce,rectangle:void 0,trackOnEnteredViewport:e.trackOnEnteredViewport,trackOnExitedViewport:e.trackOnExitedViewport}}),"id")}var xe=function(e){function t(e){s()(this,t);var n=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.lastRenderPosition=0,n.lastScrollTime=-1,n.resetCanFocusTimer=-1,n.unmountItemsIdleId=null,n.scrollingQuickly=!1,n.visibleChildrenCount=0,n.isRenderableChildrenStateChangePending=!1,n.parentOffsetTop=void 0,n.distanceToTop=void 0,n.measurementsInvalid=!1,n.viewport=void 0,n.mountableViewport=void 0,n.needsToPauseViewportItems=!0,n.updateRenderableChildrenWhenIdleHandle=null,n.requestUpdateWhenIdleCallbackHandle=null,n.pendingScollHandlerRead=null,n.renderableViewport=void 0,n.sendFPSData=function(e){var t={name:n.props.trackingName};G.b.enqueue(new z.a({args:[e,t],cb:function(e,t){return Object(X.a)(T.o.Redesign,{data:e,meta:t,type:"scrollfps"})}}))},n.getVisibleChildren=function(){for(var e=0,t=he+(n.props.viewportTopPadding?n.props.viewportTopPadding:0),i=[],r=n.nextVisibleChildrenIndex;e<t&&r<n.props.children.length;){var o=n.props.children[r];i.push(o),e+=o.estHeight,r++}return n.visibleChildrenCount=i.length,i},n.setRenderableChildrenIndexIncrement=function(){if(n.props.children[0]){var e=n.props.children[0].estHeight;n.renderableChildrenIndexIncrement=Math.min(Math.ceil(ue/e),me)}else n.renderableChildrenIndexIncrement=me},n.updateRenderableChildrenWhenIdle=function(){n.cancelPopulateRenderableChildrenWhenIdle(),n.hasScrolledWithinThreshold()||(n.timeoutForUpdateIdleCallback=fe,Object(k.cancelIdleCallback)(n.requestUpdateWhenIdleCallbackHandle),n.requestUpdateWhenIdleCallbackHandle=Object(k.requestIdleCallback)(function(){var e=Math.ceil(n.renderableChildrenIndexIncrement/2);n.populateRenderableChildrenFromProps(!1,e)})),n.state.renderableChildren.length<n.props.children.length&&n.schedulePopulateRenderableChildrenWhenIdle()},n.hasScrolledWithinThreshold=function(){return!!n.lastScrollTime&&be()-n.lastScrollTime<pe},n.populateRenderableChildrenFromProps=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.renderableChildrenIndexIncrement,i=arguments[2],r=i||n.props.children;if(n.state.renderableChildren.length<r.length||e)if(n.hasScrolledWithinThreshold())M.a.read(function(){clearTimeout(n.updateRenderableChildrenHandle),n.updateRenderableChildrenHandle=setTimeout(function(){n.populateRenderableChildrenFromProps(e,n.renderableChildrenIndexIncrement,i?r:void 0)},pe)});else{n.nextVisibleChildrenIndex+t<=r.length?n.nextVisibleChildrenIndex+=t:n.nextVisibleChildrenIndex=r.length;var o=r.slice(0,n.nextVisibleChildrenIndex);o.length&&(n.lastVisibleElId=o[o.length-1].id),M.a.write(function(){n.setState({renderableChildren:o})}),n.isRenderableChildrenStateChangePending=!0}},n.lastElementIsAboutToBeVisible=function(){if(n.lastVisibleEl&&n.lastVisibleEl.getBoundingClientRect().top<window.innerHeight+ue)return!0;return!1},n.getRenderableChildrenIndexIncrement=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=0,i=n.state.renderableChildren.length;t<e&&i<n.props.children.length;)t+=n.props.children[i].estHeight,i++;var r=i-n.state.renderableChildren.length;return Math.max(n.renderableChildrenIndexIncrement,r)},n.schedulePopulateRenderableChildrenWhenIdle=function(){!n.props.isOverlayOpen||n.props.isOverlay?n.updateRenderableChildrenWhenIdleHandle=setTimeout(function(){n.updateRenderableChildrenWhenIdle()},n.timeoutForUpdateIdleCallback):n.cancelPopulateRenderableChildrenWhenIdle()},n.cancelPopulateRenderableChildrenWhenIdle=function(){clearTimeout(n.updateRenderableChildrenWhenIdleHandle),Object(k.cancelIdleCallback)(n.requestUpdateWhenIdleCallbackHandle)},n.callOnScrollForItemsChanged=v()(function(){n.handleScroll()},T.K),n.pauseAllElements=function(){var e=n.getItemsInViewportWithFilter(n.loadedChildRefFilter),t=[];e.forEach(function(e){var n=e.itemRef;n&&(e.focused=!1,t.push(n.pauseContent))}),M.a.write(function(){t.forEach(function(e){return e()})})},n.elementIsVisible=function(e){return!!n.viewport&&n.viewport.intersects(e)},n.getItemsInViewportWithFilter=function(e){n.updateViewportInfo();var t=new K.a("id");return n.state.renderableChildren.forEach(function(i){var r=n.childMap.get(i.id);r&&e(r)&&t.push(r)}),t},n.visibleChildRefFilter=function(e){var t=n.getChildRectangle(e);return t&&n.elementIsVisible(t)||!1},n.loadedChildRefFilter=function(e){return e.loaded},n.resetScrollFramerateAndFocus=function(){n.scrollContainer&&(n.pixelsPerMSRing.clear(),n.lastScrollTime=-1,n.needsToPauseViewportItems=!0,null===n.unmountItemsIdleId&&(n.unmountItemsIdleId=Object(k.requestIdleCallback)(n.unmountItemsWhileIdle)),setTimeout(n.handleScroll,T.K))},n.setContainerRef=function(e){n.containerRef=e,n.props.innerRef&&n.props.innerRef(e)},n.getChildRectangle=function(e){var t=e.el;if(t){if(e.rectangle&&!n.measurementsInvalid)return e.rectangle;if(void 0===n.parentOffsetTop){var i=t.offsetParent;n.parentOffsetTop=i.offsetTop;var r=i.getBoundingClientRect().top;n.distanceToTop=r+n.getScrollTop()}var o=t.offsetTop+(n.parentOffsetTop||0),l=t.clientHeight,s=t.scrollHeight+"px",a=new D({top:o,height:l,heightWithMargin:s});return e.rectangle=a,a}},n.handleResize=function(e){for(var t in n.fpsMeter&&n.fpsMeter.eventHandler(e),n.hiddenChildren)n.remeasureWhenShown[t]=!0;n.measurementsInvalid=!0,n.callOnScrollForItemsChanged()},n.handleScroll=function(){n.pendingScollHandlerRead||(n.pendingScollHandlerRead=M.a.read(function(){if(clearTimeout(n.resetCanFocusTimer),n.cancelPopulateRenderableChildrenWhenIdle(),!Object(A.b)()&&n.scrollContainer){n.updateScrollMetrics();var e=n.getAveragePixelsPerMilliSecond(),t=e<se,i=e<ae,r=e<de;if(n.scrollContainer&&!n.loadMoreFired&&n.props.onLoadMore){var o=!1;if(void 0!==n.props.loadMoreToken&&void 0!==n.viewport&&n.nextVisibleChildrenIndex>=n.props.children.length){var l=n.containerRef?oe(n.containerRef):0;o=!!n.containerRef&&n.containerRef.offsetHeight+l-n.viewport.bottom<=n.viewport.height}if(o){var s=n.props.onLoadMore;setTimeout(s),n.loadMoreFired=!0}}n.populateRenderableChildrenIfLastChildIsVisible();var a=new K.a("id"),d=void 0,c=void 0,h=[];n.state.renderableChildren.forEach(function(e){var o=n.childMap.get(e.id),l=void 0;if(o&&o.el){if(!(l=n.getChildRectangle(o)))return;var s=o.id;n.elementIsHideable(l)?void 0===n.hiddenChildren[s]&&(n.childrenToHide[s]=l.heightWithMargin):void 0!==n.hiddenChildren[s]&&(n.childrenToShow[s]=!0)}if(o&&o.el&&o.rectangle){var p=o.id,u=o.itemRef,m=o.trackOnEnteredViewport,f=!!n.itemsInViewport.get(p);if(n.elementIsUnmountable(l))u&&f&&o.loaded&&o.isFocusable&&h.push(u.pauseContent);else if(u&&n.loadItemIfPossible(o,u,t,i,r,h),n.elementIsVisible(l)){a.push(o),!f&&m&&G.b.enqueue(new z.a({cb:m,args:void 0}));var g=n.elementIsFocused(l);g&&!c&&(c=o.id),t&&o.isFocusable&&!d&&g?(d=o.id,o.focused||(o.focused=!0,u&&h.push(u.focusContent))):o.loaded&&o.isFocusable&&(o.focused||n.needsToPauseViewportItems)&&(o.focused=!1,u&&h.push(u.pauseContent))}else f&&o.loaded&&o.isFocusable&&(o.focused=!1,u&&h.push(u.stopContent))}else n.measurementsInvalid&&o&&n.getChildRectangle(o)}),M.a.write(function(){h.forEach(function(e){return e()}),n.props.enableElementHiding&&n.hideOrShowChildren()}),n.itemsInViewport.forEach(function(e){var t=e.id,n=e.trackOnExitedViewport;n&&!a.has(t)&&G.b.enqueue(new z.a({cb:n,args:[!1]}))}),n.itemsInViewport=a,n.canFocusItems=t,n.focusedChild=d,n.primaryChild=c,n.measurementsInvalid=!1,n.needsToPauseViewportItems=!1,t?null===n.unmountItemsIdleId&&(n.unmountItemsIdleId=Object(k.requestIdleCallback)(n.unmountItemsWhileIdle)):(n.resetCanFocusTimer=setTimeout(n.resetScrollFramerateAndFocus,ee),null!==n.unmountItemsIdleId&&(Object(k.cancelIdleCallback)(n.unmountItemsIdleId),n.unmountItemsIdleId=null)),n.props.onScroll&&n.props.onScroll({getVisibleItemsInViewport:function(){return n.getItemsInViewportWithFilter(n.visibleChildRefFilter)},primaryChild:n.primaryChild?n.childMap.get(n.primaryChild):void 0}),n.timeoutForUpdateIdleCallback=4*fe,n.schedulePopulateRenderableChildrenWhenIdle(),n.pendingScollHandlerRead=null}else n.pendingScollHandlerRead=null}))},n.unmountItemsWhileIdle=function(e){if(n.scrollContainer){var t=[];if(n.state.renderableChildren.forEach(function(e){var i=n.childMap.get(e.id);if(i&&i.el&&i.itemRef){var r=n.getChildRectangle(i);r&&n.elementIsUnmountable(r)&&i.loaded&&t.push(i)}}),t.length){for(var i=Math.min(Math.ceil(e.timeRemaining()/te),t.length),r=[],o=0;o<i;o++){var l=t[o];r.push(l.itemRef.unmountContent),l.loaded=!1,l.focused=!1}Object(I.unstable_batchedUpdates)(function(){n.scrollContainer&&r.forEach(function(e){return e()})}),i<t.length?n.unmountItemsIdleId=Object(k.requestIdleCallback)(n.unmountItemsWhileIdle):n.unmountItemsIdleId=null}}},n.hideOrShowChildren=v()(function(){for(var e in n.childrenToHide){var t=n.childrenToHide[e];void 0!==t&&(n.hideChild(e,t),n.childrenToHide[e]=void 0)}for(var i in n.childrenToShow)void 0!==n.childrenToShow[i]&&(n.showChild(i),n.childrenToShow[i]=void 0)},T.K),n.hideChild=function(e,t){var i=n.childMap.get(e);if(i&&i.el){var r=i.el.firstChild;r&&(t!==i.el.style.height&&(i.el.style.height=t),r.classList.add(Q.e),n.hiddenChildren[e]=t+"px",i.loaded&&M.a.write(function(){i.itemRef&&i.itemRef.unmountContent()}))}},n.showChild=function(e){var t=n.childMap.get(e);if(t&&t.el){var i=t.el.firstChild;i&&(n.remeasureWhenShown[t.id]&&(n.measurementsInvalid=!0,n.remeasureWhenShown[t.id]=void 0),t.el.style.height=null,i.classList.remove(Q.e),void 0!==n.hiddenChildren[e]&&(n.hiddenChildren[e]=void 0))}},n.getStylesForOuterWrapper=function(e){if(void 0!==n.hiddenChildren[e])return{height:n.hiddenChildren[e]}},n.remeasureChild=function(e){n.measurementsInvalid=!0},n.scrollToChild=function(e,t){n.measurementsInvalid=!0,M.a.read(function(){var i=n.childMap.get(e);if(i&&i.el&&n.scrollContainer){if(i.rectangle=void 0,t&&n.isScrollChildTopVisible(e))return;var r=n.getScrollTop()+i.el.getBoundingClientRect().top-(n.props.scrollToChildPadding||0)-(n.props.viewportTopPadding||0);setTimeout(function(){n.scrollContainer&&(Object(A.c)(n.scrollContainer,r),n.callOnScrollForItemsChanged())},T.K)}})},n.isScrollChildTopVisible=function(e){var t=n.childMap.get(e);if(t&&t.el&&n.scrollContainer){var i=n.props,r=i.scrollToChildPadding,o=void 0===r?0:r,l=i.viewportTopPadding,s=void 0===l?0:l,a=window.innerHeight-s,d=t.el.getBoundingClientRect().top;return d>=s+o&&d<a}return!1},n.childMap=Ce(e),n.containerRef=null,n.itemsInViewport=new K.a("id"),n.loadMoreFired=!1,n.pixelsPerMSRing=new q(le),n.wrapperRefFNs={},n.childRefFns={},n.childrenToHide={},n.childrenToShow={},n.canFocusItems=!0,n.focusedChild=void 0,n.hiddenChildren={},n.nextVisibleChildrenIndex=0,n.lastVisibleEl=null,n.lastVisibleElId=null,n.remeasureWhenShown={},n.timeoutForUpdateIdleCallback=fe;var i=n.getVisibleChildren();return i.length&&(n.lastVisibleElId=i[i.length-1].id),n.nextVisibleChildrenIndex=i.length,n.updateRenderableChildrenHandle=null,n.state={renderableChildren:i},n.setRenderableChildrenIndexIncrement(),n.validateScrollPreservationProps(e),n.validateLoadMoreProps(e),n}return u()(t,e),d()(t,[{key:"populateRenderableChildrenIfLastChildIsVisible",value:function(){var e=this;this.isRenderableChildrenStateChangePending||this.state.renderableChildren.length<this.props.children.length&&M.a.read(function(){if(!e.isRenderableChildrenStateChangePending&&e.lastElementIsAboutToBeVisible()){var t=e.getRenderableChildrenIndexIncrement();e.populateRenderableChildrenFromProps(!1,t)}})}},{key:"setupScrollHandler",value:function(){this.fpsMeter=this.props.trackingName?_({fn:this.handleScroll,subscriber:this.sendFPSData,timeout:ee}):{eventHandler:this.handleScroll},this.scrollContainer&&this.scrollContainer.addEventListener("scroll",this.fpsMeter.eventHandler),window.addEventListener("resize",this.handleResize)}},{key:"cleanupScrollHandler",value:function(){this.fpsMeter&&("function"==typeof this.fpsMeter.cleanup&&this.fpsMeter.cleanup(),this.scrollContainer&&this.scrollContainer.removeEventListener("scroll",this.fpsMeter.eventHandler),window.removeEventListener("resize",this.handleResize),this.pendingScollHandlerRead&&(M.a.clear(this.pendingScollHandlerRead),this.pendingScollHandlerRead=null))}},{key:"componentDidMount",value:function(){var e=this;this.props.getContainer?this.scrollContainer=this.props.getContainer()||document:this.scrollContainer=document,this.props.onScroll&&this.props.onScroll({getVisibleItemsInViewport:function(){return e.getItemsInViewportWithFilter(e.visibleChildRefFilter)},primaryChild:void 0}),this.props.disableScrollCache&&!this.props.preventScrollOnMount&&Object(A.c)(this.scrollContainer,0),this.setupScrollHandler(),M.a.write(function(){if(!e.props.disableScrollCache){var t=e.getCacheKey(),n=re[t];C()(n)||(re[t]=void 0,e.scrollContainer&&Object(A.c)(e.scrollContainer,n))}e.callOnScrollForItemsChanged(),e.props.onLastVisibleChildRendered&&e.props.onLastVisibleChildRendered()}),this.schedulePopulateRenderableChildrenWhenIdle()}},{key:"componentDidUpdate",value:function(e){if(this.isRenderableChildrenStateChangePending=!1,this.measurementsInvalid=!0,this.scrollTargetId&&(this.scrollToChild(this.scrollTargetId,!1),this.scrollTargetId=void 0),this.didLayoutAloneChange(e,this.props)){this.callExitedViewportForUnmount(),this.focusedChild=void 0,this.childrenToShow={},this.childrenToHide={},this.hiddenChildren={},this.childMap.forEach(function(e){e.loaded=!1,e.focused=!1}),this.setRenderableChildrenIndexIncrement(),this.populateRenderableChildrenFromProps(!0),this.callOnScrollForItemsChanged();var t=this.getVisibleChildren();this.visibleChildrenCount=t.length,this.schedulePopulateRenderableChildrenWhenIdle()}this.populateRenderableChildrenIfLastChildIsVisible(),e.trackingName!==this.props.trackingName&&(this.cleanupScrollHandler(),this.setupScrollHandler())}},{key:"shouldComponentUpdate",value:function(e){return e.isOverlayOpen===this.props.isOverlayOpen}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.validateScrollPreservationProps(e)&&this.validateLoadMoreProps(e)&&this.didLayoutAloneChange(this.props,e)&&this.hasBeenScrolled()&&this.handleScroll(),e.loadMoreToken!==this.props.loadMoreToken&&(this.loadMoreFired=!1,this.loadMoreEl=null),e.isOverlayOpen!==this.props.isOverlayOpen&&e.isOverlayOpen&&!this.props.isOverlay&&M.a.read(this.pauseAllElements),e.isOverlayOpen===this.props.isOverlayOpen||e.isOverlayOpen||this.props.isOverlay||this.resetScrollFramerateAndFocus(),this.childMap=Ce(e,this.childMap);var n=e.children.length<this.props.children.length,i=e.children.length===this.props.children.length&&e.children.some(function(e,n){return e.id!==t.props.children[n].id});this.populateRenderableChildrenFromProps(n||i,this.renderableChildrenIndexIncrement,e.children),this.schedulePopulateRenderableChildrenWhenIdle()}},{key:"componentWillUnmount",value:function(){if(this.callExitedViewportForUnmount(),this.cleanupScrollHandler(),clearTimeout(this.updateRenderableChildrenHandle),this.cancelPopulateRenderableChildrenWhenIdle(),this.scrollContainer&&!this.props.disableScrollCache){var e=this.getCacheKey();re[e]=this.lastRenderPosition}this.childMap=new K.a("id"),this.itemsInViewport=new K.a("id"),this.wrapperRefFNs={},this.childRefFns={},this.containerRef=null,this.loadMoreEl=void 0,this.scrollContainer=void 0,this.unmountItemsIdleId&&(Object(k.cancelIdleCallback)(this.unmountItemsIdleId),this.unmountItemsIdleId=null)}},{key:"didLayoutAloneChange",value:function(e,t){return"string"==typeof e.layoutKey&&"string"==typeof t.layoutKey&&e.layoutKey!==t.layoutKey&&"string"==typeof e.dataKey&&"string"==typeof t.layoutKey&&e.dataKey===t.dataKey}},{key:"elementIsFocused",value:function(e){if(!this.viewport)return!1;var t=this.distanceToTop?this.distanceToTop:0,n=this.parentOffsetTop?this.parentOffsetTop:0,i=e.bottom+t-n,r=e.top+t-n,o=Math.min(this.viewport.bottom,i)-Math.max(this.viewport.top,r),l=o/e.height,s=o/this.viewport.height;return l>.75||s>.9}},{key:"getFirstItemInViewport",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.props.children[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value.id,l=this.childMap.get(o);if(l){var s=this.getChildRectangle(l);if(s&&this.elementIsVisible(s))return l}}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"elementIsUnmountable",value:function(e){return!!this.mountableViewport&&!this.mountableViewport.intersects(e)}},{key:"elementIsHideable",value:function(e){return!!this.renderableViewport&&!this.renderableViewport.intersects(e)}},{key:"getCacheKey",value:function(){return this.props.children.map(function(e){return e.id}).join("-")}},{key:"getScrollTop",value:function(){return this.scrollContainer?this.scrollContainer===document?B():this.scrollContainer.scrollTop:0}},{key:"updateViewportInfo",value:function(){if(this.scrollContainer){this.viewport=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buffer,n=e.container,i=C()(t)?1e3:t;if("undefined"!=typeof window&&n){var r=n===document?B():n.scrollTop;return new D({top:r,height:window.innerHeight})}return new D({top:0,height:i})}({buffer:0,container:this.scrollContainer});var e=this.props.viewportTopPadding,t=void 0===e?0:e,n=window.innerHeight-t,i=2*n;this.mountableViewport=new D({top:this.viewport.top-i,height:this.viewport.height+2*i});var r=4*n;this.renderableViewport=new D({top:this.viewport.top-r,height:this.viewport.height+2*r})}}},{key:"updateScrollMetrics",value:function(){this.updateViewportInfo();var e=be(),t=this.getScrollTop(),n=Math.abs(this.lastRenderPosition-t),i=e-this.lastScrollTime,r=this.lastScrollTime>-1;this.lastScrollTime=e,this.lastRenderPosition=t,r?this.pixelsPerMSRing.push(n/i):this.lastScrollTime=e}},{key:"getAveragePixelsPerMilliSecond",value:function(){if(this.pixelsPerMSRing.size>1){var e=0;return this.pixelsPerMSRing.forEach(function(t){return e+=t}),e/this.pixelsPerMSRing.size}return 0}},{key:"_wrapperRefFN",value:function(e,t){var n=this.childMap.get(e);n&&(n.el=t),this.lastVisibleElId===e&&(this.lastVisibleEl=t)}},{key:"getWrapperRefFN",value:function(e){var t=this,n=this.wrapperRefFNs[e];return n||(n=function(n){t._wrapperRefFN(e,n)},this.wrapperRefFNs[e]=n),n}},{key:"_childRefFn",value:function(e,t,n){var i=this.childMap.get(e);i&&(i.itemRef=t,i.loaded=!!t&&(void 0!==n?n:i.loaded),this.callOnScrollForItemsChanged())}},{key:"getChildRefFn",value:function(e){var t=this,n=this.childRefFns[e];return n||(n=function(n,i){t._childRefFn(e,n,i)},this.childRefFns[e]=n),n}},{key:"loadItemIfPossible",value:function(e,t,n,i,r,o){if(t.contentIsHeavyToMount()?i:r){var l=!e.isFocusable||n;!e.loaded&&l&&(e.loaded=!0,o.push(t.loadContent))}}},{key:"callExitedViewportForUnmount",value:function(){this.itemsInViewport.forEach(function(e){e.id;var t=e.trackOnExitedViewport;t&&G.b.enqueue(new z.a({cb:t,args:[!0]}))})}},{key:"hasBeenScrolled",value:function(){if(!this.containerRef)return!1;var e=this.props.viewportTopPadding,t=void 0===e?0:e,n=oe(this.containerRef);return this.getScrollTop()+t-n>0}},{key:"render",value:function(){var e=this;return w.a.createElement("div",{className:this.props.className,ref:this.setContainerRef},this.state.renderableChildren.map(function(t,n){return w.a.createElement("div",{key:"scroller-"+t.id,ref:e.getWrapperRefFN(t.id),style:e.getStylesForOuterWrapper(t.id)},o()("div",{className:e.hiddenChildren[t.id]?Q.e:void 0},void 0,t.render({className:Q.g,height:t.estHeight,placeholderRecommended:!1,remeasure:e.remeasureChild,scrollToAndRemeasure:e.scrollToChild,setScrollerChildRef:e.getChildRefFn(t.id),shouldLoadInitially:n<ce,width:$})))}))}},{key:"validateScrollPreservationProps",value:function(e){return"string"!=typeof e.layoutKey||void 0!==e.dataKey}},{key:"validateLoadMoreProps",value:function(e){return void 0===e.onLoadMore||"loadMoreToken"in e}}]),t}(w.a.Component);t.a=O()(ie(Object(Y.b)(xe))).withConfig({componentId:"s1rcgrht-0"})(["."," {display: none;}"],Q.e)}}]);
//# sourceMappingURL=Legacy~Explore~Frontpage~ModListing~ModQueuePages~Multireddit~News~OriginalContent~ProfileComments~ProfileO~bb6a7f26.dad3bbc8973b8259dd2c.js.map