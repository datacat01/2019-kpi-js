/**
 * Modules in this bundle
 * @license
 *
 * eastasianwidth:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Masaki Komagata
 *   homepage: https://github.com/komagata/eastasianwidth#readme
 *   version: 0.2.0
 *
 * es6-promise:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Yehuda Katz, Tom Dale, Stefan Penner and contributors
 *   homepage: https://github.com/stefanpenner/es6-promise#readme
 *   version: 4.2.5
 *
 * mustache:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: mustache.js Authors <http://github.com/janl/mustache.js>
 *   homepage: https://github.com/janl/mustache.js
 *   version: 3.0.1
 *
 * process:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Roman Shtylman <shtylman@gmail.com>
 *   homepage: https://github.com/shtylman/node-process#readme
 *   version: 0.11.10
 *
 * whatwg-fetch:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   homepage: https://github.com/github/fetch#readme
 *   version: 3.0.0
 *
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
!function o(s,a,u){function c(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,r){var c={};function h(t){return t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}void 0===e?window.eastasianwidth=c:e.exports=c,c.eastAsianWidth=function(t){var e=t.charCodeAt(0),r=2==t.length?t.charCodeAt(1):0,n=e;return 55296<=e&&e<=56319&&56320<=r&&r<=57343&&(n=(e&=1023)<<10|(r&=1023),n+=65536),12288==n||65281<=n&&n<=65376||65504<=n&&n<=65510?"F":8361==n||65377<=n&&n<=65470||65474<=n&&n<=65479||65482<=n&&n<=65487||65490<=n&&n<=65495||65498<=n&&n<=65500||65512<=n&&n<=65518?"H":4352<=n&&n<=4447||4515<=n&&n<=4519||4602<=n&&n<=4607||9001<=n&&n<=9002||11904<=n&&n<=11929||11931<=n&&n<=12019||12032<=n&&n<=12245||12272<=n&&n<=12283||12289<=n&&n<=12350||12353<=n&&n<=12438||12441<=n&&n<=12543||12549<=n&&n<=12589||12593<=n&&n<=12686||12688<=n&&n<=12730||12736<=n&&n<=12771||12784<=n&&n<=12830||12832<=n&&n<=12871||12880<=n&&n<=13054||13056<=n&&n<=19903||19968<=n&&n<=42124||42128<=n&&n<=42182||43360<=n&&n<=43388||44032<=n&&n<=55203||55216<=n&&n<=55238||55243<=n&&n<=55291||63744<=n&&n<=64255||65040<=n&&n<=65049||65072<=n&&n<=65106||65108<=n&&n<=65126||65128<=n&&n<=65131||110592<=n&&n<=110593||127488<=n&&n<=127490||127504<=n&&n<=127546||127552<=n&&n<=127560||127568<=n&&n<=127569||131072<=n&&n<=194367||177984<=n&&n<=196605||196608<=n&&n<=262141?"W":32<=n&&n<=126||162<=n&&n<=163||165<=n&&n<=166||172==n||175==n||10214<=n&&n<=10221||10629<=n&&n<=10630?"Na":161==n||164==n||167<=n&&n<=168||170==n||173<=n&&n<=174||176<=n&&n<=180||182<=n&&n<=186||188<=n&&n<=191||198==n||208==n||215<=n&&n<=216||222<=n&&n<=225||230==n||232<=n&&n<=234||236<=n&&n<=237||240==n||242<=n&&n<=243||247<=n&&n<=250||252==n||254==n||257==n||273==n||275==n||283==n||294<=n&&n<=295||299==n||305<=n&&n<=307||312==n||319<=n&&n<=322||324==n||328<=n&&n<=331||333==n||338<=n&&n<=339||358<=n&&n<=359||363==n||462==n||464==n||466==n||468==n||470==n||472==n||474==n||476==n||593==n||609==n||708==n||711==n||713<=n&&n<=715||717==n||720==n||728<=n&&n<=731||733==n||735==n||768<=n&&n<=879||913<=n&&n<=929||931<=n&&n<=937||945<=n&&n<=961||963<=n&&n<=969||1025==n||1040<=n&&n<=1103||1105==n||8208==n||8211<=n&&n<=8214||8216<=n&&n<=8217||8220<=n&&n<=8221||8224<=n&&n<=8226||8228<=n&&n<=8231||8240==n||8242<=n&&n<=8243||8245==n||8251==n||8254==n||8308==n||8319==n||8321<=n&&n<=8324||8364==n||8451==n||8453==n||8457==n||8467==n||8470==n||8481<=n&&n<=8482||8486==n||8491==n||8531<=n&&n<=8532||8539<=n&&n<=8542||8544<=n&&n<=8555||8560<=n&&n<=8569||8585==n||8592<=n&&n<=8601||8632<=n&&n<=8633||8658==n||8660==n||8679==n||8704==n||8706<=n&&n<=8707||8711<=n&&n<=8712||8715==n||8719==n||8721==n||8725==n||8730==n||8733<=n&&n<=8736||8739==n||8741==n||8743<=n&&n<=8748||8750==n||8756<=n&&n<=8759||8764<=n&&n<=8765||8776==n||8780==n||8786==n||8800<=n&&n<=8801||8804<=n&&n<=8807||8810<=n&&n<=8811||8814<=n&&n<=8815||8834<=n&&n<=8835||8838<=n&&n<=8839||8853==n||8857==n||8869==n||8895==n||8978==n||9312<=n&&n<=9449||9451<=n&&n<=9547||9552<=n&&n<=9587||9600<=n&&n<=9615||9618<=n&&n<=9621||9632<=n&&n<=9633||9635<=n&&n<=9641||9650<=n&&n<=9651||9654<=n&&n<=9655||9660<=n&&n<=9661||9664<=n&&n<=9665||9670<=n&&n<=9672||9675==n||9678<=n&&n<=9681||9698<=n&&n<=9701||9711==n||9733<=n&&n<=9734||9737==n||9742<=n&&n<=9743||9748<=n&&n<=9749||9756==n||9758==n||9792==n||9794==n||9824<=n&&n<=9825||9827<=n&&n<=9829||9831<=n&&n<=9834||9836<=n&&n<=9837||9839==n||9886<=n&&n<=9887||9918<=n&&n<=9919||9924<=n&&n<=9933||9935<=n&&n<=9953||9955==n||9960<=n&&n<=9983||10045==n||10071==n||10102<=n&&n<=10111||11093<=n&&n<=11097||12872<=n&&n<=12879||57344<=n&&n<=63743||65024<=n&&n<=65039||65533==n||127232<=n&&n<=127242||127248<=n&&n<=127277||127280<=n&&n<=127337||127344<=n&&n<=127386||917760<=n&&n<=917999||983040<=n&&n<=1048573||1048576<=n&&n<=1114109?"A":"N"},c.characterLength=function(t){var e=this.eastAsianWidth(t);return"F"==e||"W"==e||"A"==e?2:1},c.length=function(t){for(var e=h(t),r=0,n=0;n<e.length;n++)r+=this.characterLength(e[n]);return r},c.slice=function(t,e,r){textLen=c.length(t),r=r||1,(e=e||0)<0&&(e=textLen+e),r<0&&(r=textLen+r);for(var n="",i=0,o=h(t),s=0;s<o.length;s++){var a=o[s],u=c.length(a);if(e-(2==u?1:0)<=i){if(!(i+u<=r))break;n+=a}i+=u}return n}},{}],2:[function(t,e,r){"use strict";e.exports=t("./").polyfill()},{"./":3}],3:[function(H,r,n){(function(N,q){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var t,e;t=this,e=function(){"use strict";function c(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,e=void 0,i=void 0,a=function(t,e){l[n]=t,l[n+1]=e,2===(n+=2)&&(i?i(d):w())};var t="undefined"!=typeof window?window:void 0,o=t||{},s=o.MutationObserver||o.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==N&&"[object process]"==={}.toString.call(N),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(d,1)}}var l=new Array(1e3);function d(){for(var t=0;t<n;t+=2){(0,l[t])(l[t+1]),l[t]=void 0,l[t+1]=void 0}n=0}var p,v,y,m,w=void 0;function b(t,e){var r=this,n=new this.constructor(E);void 0===n[_]&&k(n);var i=r._state;if(i){var o=arguments[i-1];a(function(){return B(i,n,o,r._result)})}else S(r,n,t,e);return n}function g(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return R(e,t),e}w=u?function(){return N.nextTick(d)}:s?(v=0,y=new s(d),m=document.createTextNode(""),y.observe(m,{characterData:!0}),function(){m.data=v=++v%2}):h?((p=new MessageChannel).port1.onmessage=d,function(){return p.port2.postMessage(0)}):void 0===t&&"function"==typeof H?function(){try{var t=Function("return this")().require("vertx");return void 0!==(e=t.runOnLoop||t.runOnContext)?function(){e(d)}:f()}catch(t){return f()}}():f();var _=Math.random().toString(36).substring(2);function E(){}var A=void 0,T=1,x=2,P={error:null};function O(t){try{return t.then}catch(t){return P.error=t,P}}function j(t,e,r){var n,i,o,s;e.constructor===t.constructor&&r===b&&e.constructor.resolve===g?(o=t,(s=e)._state===T?U(o,s._result):s._state===x?F(o,s._result):S(s,void 0,function(t){return R(o,t)},function(t){return F(o,t)})):r===P?(F(t,P.error),P.error=null):void 0===r?U(t,e):c(r)?(n=e,i=r,a(function(e){var r=!1,t=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(i,n,function(t){r||(r=!0,n!==t?R(e,t):U(e,t))},function(t){r||(r=!0,F(e,t))},e._label);!r&&t&&(r=!0,F(e,t))},t)):U(t,e)}function R(t,e){var r,n;t===e?F(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?U(t,e):j(t,e,O(e)))}function D(t){t._onerror&&t._onerror(t._result),L(t)}function U(t,e){t._state===A&&(t._result=e,t._state=T,0!==t._subscribers.length&&a(L,t))}function F(t,e){t._state===A&&(t._state=x,t._result=e,a(D,t))}function S(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+T]=r,i[o+x]=n,0===o&&t._state&&a(L,t)}function L(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)n=e[s],i=e[s+r],n?B(r,n,i,o):i(o);t._subscribers.length=0}}function B(t,e,r,n){var i=c(r),o=void 0,s=void 0,a=void 0,u=void 0;if(i){if((o=function(t,e){try{return t(e)}catch(t){return P.error=t,P}}(r,n))===P?(u=!0,s=o.error,o.error=null):a=!0,e===o)return void F(e,new TypeError("A promises callback cannot return that same promise."))}else o=n,a=!0;e._state!==A||(i&&a?R(e,o):u?F(e,s):t===T?U(e,o):t===x&&F(e,o))}var C=0;function k(t){t[_]=C++,t._state=void 0,t._result=void 0,t._subscribers=[]}var I=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?U(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&U(this.promise,this._result))):F(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===g){var i=O(e);if(i===b&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===M){var o=new r(E);j(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===A&&(this._remaining--,t===x?F(n,r):this._result[e]=r),0===this._remaining&&U(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;S(t,void 0,function(t){return r._settledAt(T,e,t)},function(t){return r._settledAt(x,e,t)})},t}();var M=function(){function e(t){this[_]=C++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){R(e,t)},function(t){F(e,t)})}catch(t){F(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return c(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return M.prototype.then=b,M.all=function(t){return new I(this,t).promise},M.race=function(i){var o=this;return r(i)?new o(function(t,e){for(var r=i.length,n=0;n<r;n++)o.resolve(i[n]).then(t,e)}):new o(function(t,e){return e(new TypeError("You must pass an array to race."))})},M.resolve=g,M.reject=function(t){var e=new this(E);return F(e,t),e},M._setScheduler=function(t){i=t},M._setAsap=function(t){a=t},M._asap=a,M.polyfill=function(){var t=void 0;if(void 0!==q)t=q;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=M},M.Promise=M},"object"==typeof n&&void 0!==r?r.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}).call(this,H("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:5}],4:[function(t,e,r){var n,i;n=this,i=function(_){var e=Object.prototype.toString,E=Array.isArray||function(t){return"[object Array]"===e.call(t)};function h(t){return"function"==typeof t}function A(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(t,e){return null!=t&&"object"==typeof t&&e in t}var n=RegExp.prototype.test;var i=/\S/;function T(t){return e=i,r=t,!n.call(e,r);var e,r}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var x=/\s*/,P=/\s+/,O=/\s*=/,j=/\s*\}/,R=/#|\^|\/|>|\{|&|=|!/;function D(t){this.string=t,this.tail=t,this.pos=0}function s(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function t(){this.cache={}}D.prototype.eos=function(){return""===this.tail},D.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var r=e[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},D.prototype.scanUntil=function(t){var e,r=this.tail.search(t);switch(r){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=e.length,e},s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){var e,r,n,i=this.cache;if(i.hasOwnProperty(t))e=i[t];else{for(var o,s,a,u=this,c=!1;u;){if(0<t.indexOf("."))for(o=u.view,s=t.split("."),a=0;null!=o&&a<s.length;)a===s.length-1&&(c=f(o,s[a])||(r=o,n=s[a],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(n))),o=o[s[a++]];else o=u.view[t],c=f(u.view,t);if(c){e=o;break}u=u.parent}i[t]=e}return h(e)&&(e=e.call(this.view)),e},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(t,e){var r=this.cache,n=t+":"+(e||_.tags).join(":"),i=r[n];return null==i&&(i=r[n]=function(t,e){if(!t)return[];var r,n,i,o=[],s=[],a=[],u=!1,c=!1;function h(){if(u&&!c)for(;a.length;)delete s[a.pop()];else a=[];c=u=!1}function f(t){if("string"==typeof t&&(t=t.split(P,2)),!E(t)||2!==t.length)throw new Error("Invalid tags: "+t);r=new RegExp(A(t[0])+"\\s*"),n=new RegExp("\\s*"+A(t[1])),i=new RegExp("\\s*"+A("}"+t[1]))}f(e||_.tags);for(var l,d,p,v,y,m,w=new D(t);!w.eos();){if(l=w.pos,p=w.scanUntil(r))for(var b=0,g=p.length;b<g;++b)T(v=p.charAt(b))?a.push(s.length):c=!0,s.push(["text",v,l,l+1]),l+=1,"\n"===v&&h();if(!w.scan(r))break;if(u=!0,d=w.scan(R)||"name",w.scan(x),"="===d?(p=w.scanUntil(O),w.scan(O),w.scanUntil(n)):"{"===d?(p=w.scanUntil(i),w.scan(j),w.scanUntil(n),d="&"):p=w.scanUntil(n),!w.scan(n))throw new Error("Unclosed tag at "+w.pos);if(y=[d,p,l,w.pos],s.push(y),"#"===d||"^"===d)o.push(y);else if("/"===d){if(!(m=o.pop()))throw new Error('Unopened section "'+p+'" at '+l);if(m[1]!==p)throw new Error('Unclosed section "'+m[1]+'" at '+l)}else"name"===d||"{"===d||"&"===d?c=!0:"="===d&&f(p)}if(m=o.pop())throw new Error('Unclosed section "'+m[1]+'" at '+w.pos);return function(t){for(var e,r=[],n=r,i=[],o=0,s=t.length;o<s;++o)switch((e=t[o])[0]){case"#":case"^":n.push(e),i.push(e),n=e[4]=[];break;case"/":i.pop()[5]=e[2],n=0<i.length?i[i.length-1][4]:r;break;default:n.push(e)}return r}(function(t){for(var e,r,n=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&r&&"text"===r[0]?(r[1]+=e[1],r[3]=e[3]):(n.push(e),r=e));return n}(s))}(t,e)),i},t.prototype.render=function(t,e,r,n){var i=this.parse(t,n),o=e instanceof s?e:new s(e);return this.renderTokens(i,o,r,t,n)},t.prototype.renderTokens=function(t,e,r,n,i){for(var o,s,a,u="",c=0,h=t.length;c<h;++c)a=void 0,"#"===(s=(o=t[c])[0])?a=this.renderSection(o,e,r,n):"^"===s?a=this.renderInverted(o,e,r,n):">"===s?a=this.renderPartial(o,e,r,i):"&"===s?a=this.unescapedValue(o,e):"name"===s?a=this.escapedValue(o,e):"text"===s&&(a=this.rawValue(o)),void 0!==a&&(u+=a);return u},t.prototype.renderSection=function(t,e,r,n){var i=this,o="",s=e.lookup(t[1]);if(s){if(E(s))for(var a=0,u=s.length;a<u;++a)o+=this.renderTokens(t[4],e.push(s[a]),r,n);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)o+=this.renderTokens(t[4],e.push(s),r,n);else if(h(s)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(e.view,n.slice(t[3],t[5]),function(t){return i.render(t,e,r)}))&&(o+=s)}else o+=this.renderTokens(t[4],e,r,n);return o}},t.prototype.renderInverted=function(t,e,r,n){var i=e.lookup(t[1]);if(!i||E(i)&&0===i.length)return this.renderTokens(t[4],e,r,n)},t.prototype.renderPartial=function(t,e,r,n){if(r){var i=h(r)?r(t[1]):r[t[1]];return null!=i?this.renderTokens(this.parse(i,n),e,r,i):void 0}},t.prototype.unescapedValue=function(t,e){var r=e.lookup(t[1]);if(null!=r)return r},t.prototype.escapedValue=function(t,e){var r=e.lookup(t[1]);if(null!=r)return _.escape(r)},t.prototype.rawValue=function(t){return t[1]},_.name="mustache.js",_.version="3.0.1",_.tags=["{{","}}"];var o=new t;return _.clearCache=function(){return o.clearCache()},_.parse=function(t,e){return o.parse(t,e)},_.render=function(t,e,r,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(E(i=t)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return o.render(t,e,r,n)},_.to_html=function(t,e,r,n){var i=_.render(t,e,r);if(!h(n))return i;n(i)},_.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return r[t]})},_.Scanner=D,_.Context=s,_.Writer=t,_},"object"==typeof r&&r&&"string"!=typeof r.nodeName?i(r):"function"==typeof define&&define.amd?define(["exports"],i):(n.Mustache={},i(n.Mustache))},{}],5:[function(t,e,r){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,h=[],f=!1,l=-1;function d(){f&&c&&(f=!1,c.length?h=c.concat(h):l=-1,h.length&&p())}function p(){if(!f){var t=u(d);f=!0;for(var e=h.length;e;){for(c=h,h=[];++l<e;)c&&c[l].run();l=-1,e=h.length}c=null,f=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new v(t,e)),1!==h.length||f||u(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],6:[function(t,e,r){var n,i;n=this,i=function(a){"use strict";var r="URLSearchParams"in self,n="Symbol"in self&&"iterator"in Symbol,u="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in self,o="ArrayBuffer"in self;if(o)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(t){return t&&-1<e.indexOf(Object.prototype.toString.call(t))};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function p(t){var e=new FileReader,r=d(e);return e.readAsArrayBuffer(t),r}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(t){var e;(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:u&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():o&&u&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t,e,r,n=l(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=d(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=c(t),e=h(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},f.prototype.delete=function(t){delete this.map[c(t)]},f.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},f.prototype.set=function(t,e){this.map[c(t)]=h(e)},f.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},f.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),t(r)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},f.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),t(r)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){var r,n,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=e.method||this.method||"GET",n=r.toUpperCase(),-1<m.indexOf(n)?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),r=e.shift().replace(/\+/g," "),n=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(r),decodeURIComponent(n))}}),i}function g(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];g.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},a.DOMException=self.DOMException;try{new a.DOMException}catch(t){a.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function E(i,s){return new Promise(function(n,t){var e=new w(i,s);if(e.signal&&e.signal.aborted)return t(new a.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function r(){o.abort()}o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),r=e.shift().trim();if(r){var n=e.join(":").trim();i.append(r,n)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;n(new g(r,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.onabort=function(){t(new a.DOMException("Aborted","AbortError"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&u&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),e.signal&&(e.signal.addEventListener("abort",r),o.onreadystatechange=function(){4===o.readyState&&e.signal.removeEventListener("abort",r)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})}E.polyfill=!0,self.fetch||(self.fetch=E,self.Headers=f,self.Request=w,self.Response=g),a.Headers=f,a.Request=w,a.Response=g,a.fetch=E,Object.defineProperty(a,"__esModule",{value:!0})},"object"==typeof r&&void 0!==e?i(r):"function"==typeof define&&define.amd?define(["exports"],i):i(n.WHATWGFetch={})},{}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t("es6-promise/auto"),t("whatwg-fetch");var n=t("../modules/Deferred"),i=function(){function t(t,e,r){this.fetchInit={method:"GET",cache:"no-cache",redirect:"follow",credentials:"same-origin",referrerPolicy:"unsafe-url"};var n=-1<e.search(/(\.hatena\.ne\.jp|^ad-hatena\.com)$/)?"https":"http";this.apiBaseURL=n+"://"+e+"/api"+t+"/",this.uid=r,this.timer=null,this.pendings=[],this.deferreds={}}return t.prototype.fetchAd=function(t){if(this.deferreds[t])return this.deferreds[t].promise;var e=new n.Deferred;return this.pendings.push(t),this.deferreds[t]=e,this.pokeResolve(),e.promise},t.prototype.pokeResolve=function(){0!==this.pendings.length&&null===this.timer&&(this.timer=setTimeout(this.doResolve.bind(this),t.AD_FETCH_THROTTLING_INTERVAL))},t.prototype.doResolve=function(){var n=this;if(0!==this.pendings.length){var t=this.pendings;this.pendings=[],fetch(this.requestUrl(t),this.fetchInit).then(function(t){if(400<=t.status&&400!=t.status)throw new Error("HTTP error: status code "+t.status);return t}).then(function(t){return t.json()}).then(function(r){t.forEach(function(t){var e=r.creatives[t];e?n.deferreds[t].resolve(e):n.deferreds[t].reject(r.errors[t])})}).catch(function(e){t.forEach(function(t){n.deferreds[t].reject({thrown:e})})}).then(function(){n.timer=null,n.pokeResolve()})}},t.prototype.requestUrl=function(t){var e=t.map(function(t){return encodeURIComponent(t)}).join(",");return this.apiBaseURL+e+(this.uid?"?uid="+encodeURIComponent(this.uid):"")},t.AD_FETCH_THROTTLING_INTERVAL=50,t}();r.AdFetcher=i},{"../modules/Deferred":9,"es6-promise/auto":2,"whatwg-fetch":6}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("mustache"),n=function(){function n(){}return n.render=function(t,e){if(!t.template)throw new Error('A template is not assigned to the placement (placement: "'+e.getAttribute("data-river-placement")+'", creative_id: "'+t.id+'")');var r;try{r=i.render(t.template,t.fields)}catch(t){throw new Error("Mustache render error: "+t.message)}n.renderTo(e,r)},n.renderTo=function(t,e){if("function"==typeof document.createRange){var r=document.createRange();r.selectNode(t);var n=r.createContextualFragment(e);t.appendChild(n),r.detach()}else t.innerHTML=e},n}();r.AdRenderer=n},{mustache:4}],9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){var r=this;this.promise=new Promise(function(t,e){r.resolve=t,r.reject=e})};r.Deferred=n},{}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=function(t,e,r){this.type=t,this.target=e,this.detail=r,this.date=new Date};r.RiverEvent=i;var n=function(){function t(){this.listeners={},this.pastEvents={}}return t.prototype.dispatchPastEvents=function(t,e){var r=this;this.pastEvents[t]&&this.pastEvents[t].forEach(function(e){r.listeners[t].forEach(function(t){return t.call(void 0,e)})})},t.prototype.addEventListener=function(t,e){(this.listeners[t]=this.listeners[t]||[]).push(e),this.dispatchPastEvents(t,e)},t.prototype.dispatchEvent=function(t,e,r){var n=new i(t,e,r);this.listeners[t]&&this.listeners[t].forEach(function(t){return t.call(void 0,n)}),(this.pastEvents[t]=this.pastEvents[t]||[]).push(n)},t}();r.EventDispatcher=n},{}],11:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("eastasianwidth"),s=t("./AdFetcher"),i=t("./AdRenderer"),a=t("./EventDispatcher"),o=function(){function o(t,e){e=e||{};var r=document.getElementById("river-js"),n=e.mediaPath||r&&r.getAttribute("data-river-media-path");if(!n)throw new Error("data-river-media-path on script#river-js not found");var i=e.host||r&&r.getAttribute("data-river-host")||"ad-hatena.com",o=e.uid||r&&r.getAttribute("data-river-uid")||null;this.removeDefaultPlaceholderStyles(),this.fetcher=new s.AdFetcher(n,i,o),this.dispatcher=new a.EventDispatcher,this.push.apply(this,t)}return o.prototype.push=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.forEach(function(t){return t(e)}),0},o.prototype.startProcess=function(t){var e=".river-placement[data-river-placement='"+t+"']",r=document.querySelector(e);if(r)return r.setAttribute("data-river-status","pending"),r;var n=new Error('Placement "'+t+'" is requested to display an ad, but the node '+e+" not found");throw this.dispatcher.dispatchEvent("render:error",document.body,{error:{thrown:n}}),n},o.prototype.finishProcess=function(t,e,r){r?"CREATIVE_NOT_FOUND"===r.code?(t.setAttribute("data-river-status","empty"),this.dispatcher.dispatchEvent("render:empty",t,{error:r})):(t.setAttribute("data-river-status","error"),this.dispatcher.dispatchEvent("render:error",t,{error:r})):(t.setAttribute("data-river-status","done"),this.dispatcher.dispatchEvent("render:done",t,{creative:e}))},o.prototype.registerPlacement=function(t){return this.fetchPlacement(t).then(this.render)},o.prototype.fetchPlacement=function(t){var e=this,r=this.startProcess(t);return this.fetcher.fetchAd(t).then(function(t){return{placeholder:r,creative:t}}).catch(function(t){throw e.finishProcess(r,void 0,t),t})},Object.defineProperty(o.prototype,"render",{get:function(){var n=this;return function(e){try{i.AdRenderer.render(e.creative,e.placeholder)}catch(t){var r={thrown:t};throw n.finishProcess(e.placeholder,void 0,r),r}return n.finishProcess(e.placeholder,e.creative,void 0),e.creative}.bind(this)},enumerable:!0,configurable:!0}),o.prototype.addEventListener=function(t,e){this.dispatcher.addEventListener(t,e)},o.prototype.muteEmpty=function(t){if("CREATIVE_NOT_FOUND"!==t.code)throw t},o.prototype.truncate=function(n){var i=this;return function(t){for(var e in n){var r=0;"number"==typeof n[e]?r=n[e]:"function"==typeof n[e]&&(r=n[e](t.creative,o.textLength)),t.creative.fields[e]=i.truncateText(t.creative.fields[e],r)}return t}.bind(this)},o.textLength=function(t){return n.length(t)/2},o.prototype.truncateText=function(t,e){return o.textLength(t)<=e?t:n.slice(t,0,2*e-2)+"â€¦"},o.prototype.removeDefaultPlaceholderStyles=function(){var t=document.createElement("style");t.type="text/css";var e=document.createTextNode("ins.river-placement { text-decoration: none; }");t.appendChild(e),document.head.appendChild(t)},o}();r.RiverAds=o},{"./AdFetcher":7,"./AdRenderer":8,"./EventDispatcher":10,eastasianwidth:1}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./modules/RiverAds");window.riverAds||(window.riverAds=[]),window.riverAds instanceof Array&&(window.riverAds=new n.RiverAds(window.riverAds))},{"./modules/RiverAds":11}]},{},[12]);